{% extends 'partials/dashboard.html' %}
{% load widget_tweaks %}
{% block content %}
<div class="container-fluid">
    <h1 class="h3 mb-4 text-gray-800">Cadastro de Tarefas</h1>
    <div>
        <form action="{{ request.path }}" method="post">
            {% include 'partials/submit.html' %}
            <div class="form-row">
                <div class="form-group col-md-12">
                    <label class="font-weight-bold">Descrição</label>
                    {% render_field form.descricao_tarefa class="form-control" %}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-3">
                    <label class="font-weight-bold">Data Inicial</label>
                    {% render_field form.data_inicial class="form-control" %}
                </div>
                <div class="form-group col-md-3">
                    <label class="font-weight-bold">Data Final</label>
                    {% render_field form.data_final class="form-control" %}
                </div>
                <div class="form-group col-md-6">
                    <label class="font-weight-bold">Status</label>
                    {% render_field form.status class="form-control" %}
                </div>
            </div>
            <div class="form-row">
                <div id="frequencia" class="form-group col-md-12">
                    <label class="font-weight-bold">Frequência</label>
                    {% render_field form.frequencia class="form-control"%}
                </div>
                <div id="outra" class="form-group col-md-8 d-none">
                    <label class="font-weight-bold">Outra</label>
                    {% render_field form.outra class="form-control"%}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-12">
                    <label class="font-weight-bold">Usuários</label>
                    {% render_field form.usuario class="form-control" %}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-12">
                    <label class="font-weight-bold">Observações</label>
                    {% render_field form.observacao class="form-control" %}
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
{% block custom-scripts %}
<script>
    let mostraOutra = () => {
        let valorFrequencia = $("#frequencia option:selected").val();
        let outra = $("#outra");
        let frequencia = $("#frequencia");

        if(valorFrequencia == "OUTRO"){
            outra.removeClass("d-none");
            frequencia.removeClass("col-md-12");
            frequencia.addClass("col-md-4");
        }
        else{
            outra.addClass("d-none");
            frequencia.removeClass("col-md-4");
            frequencia.addClass("col-md-12");
        }
    }

    $(document).ready(function(){
        $("#frequencia").change(function(){
            mostraOutra();
        });
    });
</script>
{% endblock %}